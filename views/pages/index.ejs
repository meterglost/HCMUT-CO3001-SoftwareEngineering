<style>
	main {
		display: flex;
		align-items: center;
		justify-content: center;
	}

	main form#upload {
		width: 30rem;
		height: 20rem;
		padding: 2rem;
		border: 2px dashed gray;
		border-radius: 2rem;
		background-color: #f5f5f5;

		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		row-gap: 1rem;

		cursor: pointer;
		user-select: none;

		& * {
			pointer-events: none;
		}
	}

	main form#upload.dragging {
		background-color: #e2e8f0;
		box-shadow: 0 0 1em 0.5em rgb(0 0 0 / 0.2);
	}
</style>

<main>
	<label>
		<input id="file" name="file" type="file" form="upload" hidden />
		<form id="upload" method="POST" action="/print" enctype="multipart/form-data">
			<div id="upload-icon"><i class="fa-thin fa-file-arrow-up" style="font-size: 6em"></i></div>
			<div id="upload-text">
				Kéo thả tệp vào đây hoặc
				<span style="text-decoration: underline; color: dodgerblue">chọn tệp</span>
				để tải lên
			</div>
		</form>
	</label>
</main>

<script>
	/** @type HTMLFormElement **/
	const uploadForm = document.querySelector("form#upload");
	/** @type HTMLInputElement **/
	const fileInput = document.querySelector("input[type=file]");

	uploadForm.addEventListener("dragenter", function (e) {
		e.preventDefault();
		uploadForm.classList.add("dragging");
	});

	uploadForm.addEventListener("dragleave", function (e) {
		e.preventDefault();
		uploadForm.classList.remove("dragging");
	});

	uploadForm.addEventListener("dragover", function (e) {
		e.preventDefault();
	});

	uploadForm.addEventListener("drop", function (e) {
		e.preventDefault();
		uploadForm.classList.remove("dragging");

		if (e.dataTransfer.files.length != 1) {
			return;
		}

		fileInput.files = e.dataTransfer.files;
		uploadForm.submit();
	});

	fileInput.addEventListener("change", function (e) {
		uploadForm.submit();
	});
</script>
